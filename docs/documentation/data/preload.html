<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-documentation/data/preload">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<title data-rh="true">DB Preloading | SimpleIOT</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://simpleiot.net/docs/documentation/data/preload"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="DB Preloading | SimpleIOT"><meta data-rh="true" name="description" content="During installation, the system goes through three phases:"><meta data-rh="true" property="og:description" content="During installation, the system goes through three phases:"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://simpleiot.net/docs/documentation/data/preload"><link data-rh="true" rel="alternate" href="https://simpleiot.net/docs/documentation/data/preload" hreflang="en"><link data-rh="true" rel="alternate" href="https://simpleiot.net/docs/documentation/data/preload" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.252f01a2.css">
<link rel="preload" href="/assets/js/runtime~main.d4c6bab6.js" as="script">
<link rel="preload" href="/assets/js/main.a89a2cd9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#18191B;color:#9969F7" role="banner"><div class="announcementBarContent_xLdY">Welcome Starter Bundle users! <a href="/docs/workshops/intro">Click here</a> to go to the Workshop.</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="SimpleIOT logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="SimpleIOT logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SimpleIOT</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Get Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/documentation/intro">Documentation</a><a class="navbar__item navbar__link" href="/docs/workshops">Workshops</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/team">Team</a><a class="navbar__item navbar__link" href="/docs/github">Github</a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Welcome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/concepts">Basic Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/install/intro">Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/workshops/intro">Workshops</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/documentation/intro">Documentation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/documentation/cli/intro">CLI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/documentation/sdk/intro">Client SDKs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/documentation/data/intro">Data</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/flow">Data Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/common">Common Interfaces and APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/events">Data vs. Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/twin">Digital Twins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/mqtt">MQTT Topics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/datalake">Data Lake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/dbaccess">RDS Database Access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/documentation/data/preload">DB Preloading</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contributing">Contributing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/legal">Legal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/roadmap">Roadmap</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Documentation</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Data</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">DB Preloading</span><meta itemprop="position" content="3"></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>DB Preloading</h1></header><p>During <a href="/docs/install/intro">installation</a>, the system goes through three phases:</p><ol><li><strong>Bootstrap</strong>: where core security credentials are created, and the user is asked for Team information. It writes a file with the values of responses to the questions in <code>~/.simpleiot/{team-name}/bootstrap.json</code>.</li><li><strong>Deploy</strong>: where the answers provided are passed to a <a href="https://aws.amazon.com/cdk/" target="_blank" rel="noopener noreferrer">CDK</a> script. This will create the entire back-end infrastructure. The contents of the <code>bootstrap.json</code> file are passed to the script. The CDK outputs values for whatever services it provisioned in <code>~/.simpleiot/{team-name}/cdkoutput.json</code>. The contents of <code>boostrap.json</code>, this file, and the system defaults in <code>simpleiot/iotapi/iotcdk/installer/defaults.json</code> are merged to create a single configuration JSON file located at `~/.simpleiot/{team-name}/config.json. </li><li><strong>Database Setup</strong>: a local script is run to access the database, create the database structure, and pre-load it with some test data loaded from <code>simpleiot/iotapi/db/dbdata.json</code>.</li></ol><p>This last step creates the following elements:</p><ul><li><strong>Projects</strong>: the demo project is called <em>Sunshine</em></li><li><strong>Models</strong>: demo model definitions.</li><li><strong>Devices</strong>: these are &#x27;mock devices&#x27; in that they are not actual devices with IOT certificates registered with AWS IOT. They are registered in the SQL database and can be interacted with using the <code>iot device</code> CLI commands.</li><li><strong>Access roles</strong>: these are placeholders for future fine-grain roles.</li><li><strong>Users</strong>: Administrator users created in the Cognito user pool. The password generated during the installation phase will be assigned to the administrative user. This username/password can be used to log in to the system using the <code>iot auth login</code> CLI command.</li><li><strong>Templates</strong>: Templates allow definition of common Project/Model/Datatype structures. A JSON structure defines the behavior. It can be expanded to allow custom projects.</li><li><strong>Generators</strong>: Generators are templates for code projects. They can be used at runtime to create a firmware package with the certificates and project credentials filled in. The <em>HelloWorld</em> and <em>SensorDemo</em> projects are installed as generators and can be used by the <code>iot firmware generate</code> command to create a starter project quickly.</li><li><strong>System Settings</strong>: System settings are Team-wide settings stored in the database. These can be used to provide dynamic values to the lambdas at runtime.</li></ul><p>Once this step is concluded, the system is configured and ready for use.</p><p>All three steps and pre-requisites are packaged inside a compiled Docker container image at <a href="https://hub.docker.com/r/amazon/simpleiot-installer" target="_blank" rel="noopener noreferrer">https://hub.docker.com/r/amazon/simpleiot-installer</a>. </p><p>The <a href="https://pypi.org/project/simpleiot-cli/" target="_blank" rel="noopener noreferrer">SimpleIOT CLI package</a> when invoked with the <a href="/docs/documentation/cli/cloud">iot cloud install</a> command will download the Docker image and invoke it. The image will run through the above three stages to configure the installation on the cloud. The Docker image is set up to access the <code>~/.aws</code> and <code>~/.simpleiot</code> directories on the local device so configuration data can be read and written onto the local system&#x27;s disk.</p><p>To create a custom installer or provide custom settings, you will want to download the open-source to the <a href="https://github.com/awslabs/simpleiot" target="_blank" rel="noopener noreferrer">SimpleIOT installer</a>, and install the necessary pre-requisites, and use the provided scripts to <em>bootstrap</em>, <em>deploy</em>, and run <em>dbsetup</em>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/documentation/data/dbaccess"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">RDS Database Access</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/contributing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Contributing</div></a></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Welcome</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/workshops/intro">Workshops</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/awslabs/simpleiot-build" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website Source<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Amazon Web Services, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d4c6bab6.js"></script>
<script src="/assets/js/main.a89a2cd9.js"></script>
</body>
</html>