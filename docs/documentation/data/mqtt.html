<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-documentation/data/mqtt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<title data-rh="true">MQTT Topics | SimpleIOT</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://simpleiot.net/docs/documentation/data/mqtt"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="MQTT Topics | SimpleIOT"><meta data-rh="true" name="description" content="PubSub"><meta data-rh="true" property="og:description" content="PubSub"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://simpleiot.net/docs/documentation/data/mqtt"><link data-rh="true" rel="alternate" href="https://simpleiot.net/docs/documentation/data/mqtt" hreflang="en"><link data-rh="true" rel="alternate" href="https://simpleiot.net/docs/documentation/data/mqtt" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.2565bf47.css">
<link rel="preload" href="/assets/js/runtime~main.6515c6bf.js" as="script">
<link rel="preload" href="/assets/js/main.a89a2cd9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#18191B;color:#9969F7" role="banner"><div class="announcementBarContent_xLdY">Welcome Starter Bundle users! <a href="/docs/workshops/intro">Click here</a> to go to the Workshop.</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="SimpleIOT logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="SimpleIOT logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SimpleIOT</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Get Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/documentation/intro">Documentation</a><a class="navbar__item navbar__link" href="/docs/workshops">Workshops</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/team">Team</a><a class="navbar__item navbar__link" href="/docs/github">Github</a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Welcome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/concepts">Basic Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/install/intro">Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/workshops/intro">Workshops</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/documentation/intro">Documentation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/documentation/cli/intro">CLI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/documentation/sdk/intro">Client SDKs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/documentation/data/intro">Data</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/flow">Data Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/common">Common Interfaces and APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/events">Data vs. Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/twin">Digital Twins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/documentation/data/mqtt">MQTT Topics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/datalake">Data Lake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/dbaccess">RDS Database Access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/preload">DB Preloading</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contributing">Contributing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/legal">Legal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/roadmap">Roadmap</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Documentation</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Data</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">MQTT Topics</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>MQTT Topics</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pubsub">PubSub<a class="hash-link" href="#pubsub" title="Direct link to heading">​</a></h2><p>SimpleIOT connects to AWS IoT Core via the <a href="https://docs.aws.amazon.com/iot/latest/developerguide/mqtt.html" target="_blank" rel="noopener noreferrer">MQTT protocol</a>. </p><p>MQTT works on the principle of a central hub called a <em>broker</em> and one or more Publishers and Subscribers. This is also known as a <em>PubSub System</em>, meaning that one or more entities connected to the service can <em>Publish</em> data onto it, and one or more of those interested in receiving the data can <em>Subscribe</em> to receive notifications when the data arrives.</p><p>The simplest form is a single publisher, a broker, and a single subscriber:</p><div align="center"><img loading="lazy" src="/img/data/mqtt-pub-sub-1-1.png" width="80%" class="img_ev3q"></div><p></p><p>When publishing to MQTT, you can specify two things:</p><ul><li><strong>Topic</strong>: this is a string indicating a named <em>slot</em> or <em>channel</em> into which data is sent.</li><li><strong>Payload</strong>: the content of the data to be put into that slot or channel. This is often a JSON data structure, but it can be whatever you want.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="topics">Topics<a class="hash-link" href="#topics" title="Direct link to heading">​</a></h3><p><em>Topics</em> typically take the form of a series of names, separated by slashes. This allows you to create an arbitrary naming hierarchy. For example, data from a thermometer with the name TM-1 can be sent to the channel:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">tm-1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>But if the thermometer is installed in a room numbered r101, you may want to send the data to a topic named:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">r101/tm-1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And if you had a light sensor and a switch and a window shade in the same room, data coming and going to each device could each be sent to their own channel:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">r101/tm-1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">r101/ls-1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">r101/sw-1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">r101/ws-1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When <em>subscribing</em> to a channel, if you were interested in ONLY the temperature sensor in room r101, you would be subscribing to:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">r101/tm-1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>But if you want to be notified of ALL temperature sensors, you could use a wild-card and subscribe to:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">*/tm-1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you were interested in ALL devices in room r101 you may want to subscribe to:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">r101/*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If room r101 is in building b2, you may want to use a topic hierarchy that allows for more granularity. For example, maybe you want to be able to look for data on a single floor, and since room r101 is on the 8th floor, your topic for data from the thermometer may look like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">b2/f8/r101/tm-1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Think of this as a hierarchy:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  b2 +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     + f8 +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          + r101 +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                 + tm -1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>MQTT also has a concept of single and multiple levels of wildcards with <code>#</code> and <code>*</code> characters. For example, you can subscribe to <code>#/f8/#/#</code> to subscribe to all devices from any room and device on the 8th floor of any building. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="payload">Payload<a class="hash-link" href="#payload" title="Direct link to heading">​</a></h3><p>The payload is the data written into that named <em>slot</em> or <em>channel</em>. This could be anything you want but is often structured into a JSON packet for easier debugging and legibility.</p><p>For example, a temperature sensor may want to send the current temperature reading into its own channel:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Topic: b2/f8/r101/tm-1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Payload: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         &quot;temp&quot;: 78.3,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         &quot;units&quot;: &quot;F&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         &quot;timestamp&quot;: 3221188</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The recipient listening to this channel would then be given the content of the <em>payload</em>, to do with as they please.</p><p>Note that you could just as well put the data that you might otherwise put in the topic in the payload itself: </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Topic: mydata</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Payload: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         &quot;building&quot;: &quot;b2&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         &quot;floor&quot;: &quot;f8&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         &quot;room&quot;: &quot;r101&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         &quot;device&quot;: &quot;tm-1&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         &quot;temp&quot;: 78.3,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         &quot;units&quot;: &quot;F&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         &quot;timestamp&quot;: 3221188</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>However, you would no longer be able to do wildcard filtering based on the topic hierarchy. This is a design choice you would have to make.</p><p>Again, the payload can be whatever you want. How the topic naming hierarchy is designed is up to you. In AWS IoT, the design of the topic and the payload is an important part of the design of an overall system, meriting its own whitepaper and best practices: <a href="https://docs.aws.amazon.com/whitepapers/latest/designing-mqtt-topics-aws-iot-core/designing-mqtt-topics-aws-iot-core.html" target="_blank" rel="noopener noreferrer">Designing MQTT Topics for AWS IoT Core</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pubsub-modes">PubSub modes<a class="hash-link" href="#pubsub-modes" title="Direct link to heading">​</a></h3><p>We showed above a notion of a single publisher, a broker, and a subscriber. This is considered a one-to-one model.</p><div align="center"><img loading="lazy" src="/img/data/mqtt-pub-sub-1-1.png" width="80%" class="img_ev3q"></div><p></p><p>MQTT also supports the notion of many publishers (i.e., many devices sending data to the cloud):</p><div align="center"><img loading="lazy" src="/img/data/mqtt-pub-sub-many-1.png" width="80%" class="img_ev3q"></div><p></p><p>Also, one publisher and many subscribers (i.e., one device sending data and multiple listeners -- for example, a logging system, a dashboard, a command-line interface, a mobile app, etc.)</p><div align="center"><img loading="lazy" src="/img/data/mqtt-pub-sub-1-many.png" width="80%" class="img_ev3q"></div><p></p><p>And, of course, many publishers and many subscribers:</p><div align="center"><img loading="lazy" src="/img/data/mqtt-pub-sub-many-many.png" width="80%" class="img_ev3q"></div><p></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="simpleiot-and-mqtt">SimpleIOT and MQTT<a class="hash-link" href="#simpleiot-and-mqtt" title="Direct link to heading">​</a></h3><p>SimpleIOT is an <em>opinionated</em> framework, meaning it has taken a common design pattern and embedded it with so-called <em>sane defaults</em>. </p><p>The benefit is out-of-the-box, you do not have to worry about designing your own MQTT topics and payloads. However, if you want full control over those issues and create your own topics, you can add those without disrupting the system&#x27;s core functionality.</p><p>If you are unfamiliar with the basic Project / Model taxonomy, it is highly recommended that you read the <a href="/docs/intro">Basic Concept</a> introductory section.</p><p>Here is what a typical SimpleIOT topic and payload look like:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Topic: simpleiot_v1/app/set/proj-01/model-ABC/SN-4387</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Payload: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;action&quot;: &quot;set&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;project&quot;: &quot;proj-01&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;model&quot;: &quot;model-ABC&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;serial&quot;: &quot;SN-4387&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;name&quot;: &quot;temperature&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;value&quot;: &quot;78.2&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the data has geographic/GPS data associated with it, it will look like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Topic: simpleiot_v1/app/set/proj-01/model-ABC/SN-4387</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Payload: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;action&quot;: &quot;set&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;project&quot;: &quot;proj-01&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;model&quot;: &quot;model-ABC&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;serial&quot;: &quot;SN-4387&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;name&quot;: &quot;temperature&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;value&quot;: &quot;78.2&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;geo_lat&quot;: &quot;22.23423&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;goe_lng&quot;: &quot;-122.4323&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The SimpleIOT MQTT topic hierarchy is designed as follows:</p><ul><li><strong>simpleiot_v1</strong>: This is a prefix with the protocol version embedded in it. This means your application topics should never interfere with SimpleIOT data. It also allows you to filter messages sent by SimpleIOT from other types of applications.</li><li><strong>app</strong>: SimpleIOT separates data sent to/from a device into several streams, depending on the domain. In this case, these could be:<ul><li><strong>/hw</strong>: hardware level operations, like voltages, calibrations, RAM levels, etc.</li><li><strong>/sys</strong>: operating system or firmware level operations, like versions, manufacturer IDs, etc.</li><li><strong>/adm</strong>: Administrative operation involving device registry, provisioning, ownership, location placement, etc.</li><li><strong>/app</strong>: Application level values, for example, whether an application has run, what the sensor values are, what button has been pressed, etc.</li><li><strong>/user</strong>: Userlevel values. They may contain Personally-Identifiable-Information (PII), like user IDs or usernames. This allows user data on the broker side to be filtered and sent to separate data repositories to comply with regulatory rules. If a device supports multiple user profiles, this mechanism can also be used to signal to switch between users.</li></ul></li><li><strong>action</strong>: An operation to be performed on individual data elements. The most common are <em>set</em>, <em>get</em>, and <em>monitor</em>.</li><li><strong>project name</strong>: Name of the SimpleIOT Project.</li><li><strong>model name</strong>: Model name.</li><li><strong>serial number</strong>: Device serial number of this specific device.</li><li><strong>name</strong>: Name of the Datatype for which we send a value.</li><li><strong>value</strong>: Value of the Data element for this specific device associated with that <em>name</em>.</li></ul><p>The <em>action</em>, <em>project</em>, <em>model</em>, and <em>serial</em> values are replicated in the body. This is so that mechanisms along the way that filter for MQTT topics (such as AWS IoT Rules) can redirect the data to proper targets. But once the data is sent to a downstream data repository or analytics service, the topic data will no longer be available. The payload contains the same information so that analytics can be performed based on the values in the payload.</p><p>By default, the payload is sent to a Lambda function that then re-distributes it to a variety of destinations (see the <a href="/docs/documentation/data/flow">Data Flow</a> section for more on this). However, you can redirect the data to other AWS services based on your needs by filtering the MQTT topic in <a href="https://docs.aws.amazon.com/iot/latest/developerguide/iot-rules.html" target="_blank" rel="noopener noreferrer">IoT Core rules</a>.</p><p>All data sent from a device is received by a lambda, which checks to see if the <em>name</em> field is valid (if not, it discards the data). If valid, it sends the data to DynamoDB, RDS, and Timestream databases, and if the <code>show_on_twin</code> attribute of the Datatype is set to <code>true</code>, it re-publishes the data to the following topic:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">simpleiot_v1/app/monitor/{project}/{model}/{device-serial-number}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This allows subscribers to monitor changes in data, such as the <a href="/docs/documentation/cli/device#iot-device-monitor">iot device monitor</a> command or GUI dashboards or application logging systems to present changes in data in real-time.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/documentation/data/twin"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Digital Twins</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/documentation/data/datalake"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data Lake</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pubsub" class="table-of-contents__link toc-highlight">PubSub</a><ul><li><a href="#topics" class="table-of-contents__link toc-highlight">Topics</a></li><li><a href="#payload" class="table-of-contents__link toc-highlight">Payload</a></li><li><a href="#pubsub-modes" class="table-of-contents__link toc-highlight">PubSub modes</a></li><li><a href="#simpleiot-and-mqtt" class="table-of-contents__link toc-highlight">SimpleIOT and MQTT</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Welcome</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/workshops/intro">Workshops</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/awslabs/simpleiot-build" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website Source<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Amazon Web Services, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.6515c6bf.js"></script>
<script src="/assets/js/main.a89a2cd9.js"></script>
</body>
</html>