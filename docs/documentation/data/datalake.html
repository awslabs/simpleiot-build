<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-documentation/data/datalake">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<title data-rh="true">Data Lake | SimpleIOT</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://simpleiot.net/docs/documentation/data/datalake"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Data Lake | SimpleIOT"><meta data-rh="true" name="description" content="Data Lakes are repositories of data from a variety of sources that can be stored in structured or unstructured format. These can be analyzed to gain insights into the operations of a system."><meta data-rh="true" property="og:description" content="Data Lakes are repositories of data from a variety of sources that can be stored in structured or unstructured format. These can be analyzed to gain insights into the operations of a system."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://simpleiot.net/docs/documentation/data/datalake"><link data-rh="true" rel="alternate" href="https://simpleiot.net/docs/documentation/data/datalake" hreflang="en"><link data-rh="true" rel="alternate" href="https://simpleiot.net/docs/documentation/data/datalake" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.252f01a2.css">
<link rel="preload" href="/assets/js/runtime~main.3ab9f855.js" as="script">
<link rel="preload" href="/assets/js/main.a89a2cd9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#18191B;color:#9969F7" role="banner"><div class="announcementBarContent_xLdY">Welcome Starter Bundle users! <a href="/docs/workshops/intro">Click here</a> to go to the Workshop.</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="SimpleIOT logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="SimpleIOT logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SimpleIOT</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Get Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/documentation/intro">Documentation</a><a class="navbar__item navbar__link" href="/docs/workshops">Workshops</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/team">Team</a><a class="navbar__item navbar__link" href="/docs/github">Github</a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Welcome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/concepts">Basic Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/install/intro">Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/workshops/intro">Workshops</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/documentation/intro">Documentation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/documentation/cli/intro">CLI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/documentation/sdk/intro">Client SDKs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/documentation/data/intro">Data</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/flow">Data Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/common">Common Interfaces and APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/events">Data vs. Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/twin">Digital Twins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/mqtt">MQTT Topics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/documentation/data/datalake">Data Lake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/dbaccess">RDS Database Access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/data/preload">DB Preloading</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contributing">Contributing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/legal">Legal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/roadmap">Roadmap</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Documentation</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Data</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Data Lake</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Data Lake</h1></header><p><em>Data Lakes</em> are repositories of data from a variety of sources that can be stored in structured or unstructured format. These can be analyzed to gain insights into the operations of a system.</p><p>AWS Cloud offers a variety of ways to store and process this data. How this data is handled varies depending on business needs. The main concern is to capture all the data and place it in a common format in an inexpensive storage medium.</p><p>In AWS, the common denominator is storage in S3 as CSV data.</p><p>When raw data arrives from devices, it is redirected to several structured data sources:</p><ul><li><strong>RDS</strong>: The latest value for any given device is stored as a named <strong>Data</strong> record, associated with a single <strong>Device</strong> element.</li><li><strong>DynamoDB</strong>: Each data payload is parsed and saved to DynamoDB, along with a timestamp.</li><li><strong>Timestream</strong>: Each data record is also saved as a time-based series so BI and data visualization applications can easily analyze it.</li></ul><p>The same data can easily be directed into a Data Lake by sending the data to S3 via <a href="https://docs.aws.amazon.com/iot/latest/developerguide/iot-rules.html" target="_blank" rel="noopener noreferrer">IoT Core rules</a>. By default, SimpleIOT does not send the data to an S3 data lake. This was a design choice to avoid incurring an unnecessary cost for customers who do not need this functionality.</p><p>However, doing so is relatively straightforward. The easiest way is to log into the console and add an IoT Rule to redirect all data to S3.</p><ul><li>Log in to the AWS Console, navigate to AWS IoT &gt; Message Routine &gt; Rules, and then click on the <em>Create Rule</em> button.</li></ul><div align="center"><img loading="lazy" src="/img/data/iot-rule-create.png" width="90%" class="img_ev3q"></div><ul><li>Create a rule where messages are routed. For example, you can provide a custom SQL statement to filter only specific messages (based on their <a href="/docs/documentation/data/mqtt">MQTT topic</a>, or select all messages to be saved.</li></ul><div align="center"><img loading="lazy" src="/img/data/iot-core-sql.png" width="90%" class="img_ev3q"></div><p>To save everything, specify:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">SELECT * FROM *</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>In the Rule actions section, you can select an &quot;S3 bucket&quot; and specify the parameters needed:</li></ul><div align="center"><img loading="lazy" src="/img/data/iot-rule-s3.png" width="90%" class="img_ev3q"></div><p>The <em>S3 URL</em> is the URL of an existing S3 bucket. You can create one and select it using the <em>Browse</em> button.</p><p>The <em>Key</em> field can be blank, in which case all data files are saved to the top level of the S3 bucket. For example, if you set the key to a <em>/prefix</em>, the files will be saved to a sub-directory inside the bucket.</p><p>The <em>Canned ACL</em> determines whether the data is meant to be public or private. For most cases, <em>private</em> is a good choice. </p><p>The <em>IAM Role</em> defines AWS IoT&#x27;s privileges to access your S3 bucket. If in doubt, click on the <code>Create new role</code> bucket and define a role such as <code>access_s3_from_iot_role</code>. IOT will create all the policies needed to allow it to write data to your S3 bucket.</p><p>Once defined, all data published to the <a href="/docs/documentation/data/mqtt">MQTT topic</a> will be automatically routed to S3 and populate your data lake.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="amazon-kinesis-firehose">Amazon Kinesis Firehose<a class="hash-link" href="#amazon-kinesis-firehose" title="Direct link to heading">​</a></h3><p>An alternative method is to route the IoT data to <a href="https://aws.amazon.com/kinesis/data-firehose/" target="_blank" rel="noopener noreferrer">Amazon Kinesis Firehose</a>, which would then allow you to collect the data in bulk format, then specify how often it is pushed out to an S3 bucket. This method allows bulk data to be cached by Firehose and then saved to the data lake. It offers cost savings over per-record transaction data saved to S3.</p><p>Once the data is on S3, you can initiate processing triggers via <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/NotificationHowTo.html" target="_blank" rel="noopener noreferrer">S3 Event Notifications</a>. For example, you can kick off lambdas <a href="https://docs.aws.amazon.com/lambda/latest/dg/with-s3-example.html" target="_blank" rel="noopener noreferrer">further processing lambdas</a> or send the data via <a href="https://aws.amazon.com/glue/" target="_blank" rel="noopener noreferrer">AWS Glue ETL pipelines</a> or <a href="https://aws.amazon.com/athena/" target="_blank" rel="noopener noreferrer">Amazon Athena</a> interactive data query service.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-to-do-with-the-data">What to do with the data<a class="hash-link" href="#what-to-do-with-the-data" title="Direct link to heading">​</a></h3><p>Ultimately, what you do with the data is driven by your application needs. What SimpleIOT provides is a lightweight, universal data exchange mechanism for any type of device to send any data to the cloud.</p><p>The data can be used to:</p><ul><li>Decide what user-interface elements or application features are used the most (or least). This can help drive product design decisions for the next generation of products.</li><li>Detect defects in the manufacturing process or specific hardware components.</li><li>Perform predictive analytics to send repair personnel or parts <em>before</em> a device fails. This improves device reliability and up-time.</li><li>Track device usage metrics. This can be used to enable new business models based on device usage, subscriptions, or replenishing consumables.</li><li>Track geo-data on conditions of products as they are transported across the globe.</li><li>Enable track-and-trace applications to locate assets via GPS data.</li><li>Signal personnel when devices go off-line or data values are out-of-range. For example, food or medical supplies in cold-chain storage.</li><li>Collect data on moving objects such as cars, boats, or airplanes.</li><li>Perform analytics on entire families of products and get insight into how customers use them.</li></ul><p>If these are features you would like to implement, SimpleIOT unlocks these capabilities and allows you to focus on your application and business needs instead of the undifferentiated heavy lifting of designing protocols, data formats, and dealing with scalability issues.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/documentation/data/mqtt"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">MQTT Topics</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/documentation/data/dbaccess"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">RDS Database Access</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#amazon-kinesis-firehose" class="table-of-contents__link toc-highlight">Amazon Kinesis Firehose</a></li><li><a href="#what-to-do-with-the-data" class="table-of-contents__link toc-highlight">What to do with the data</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Welcome</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/workshops/intro">Workshops</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/awslabs/simpleiot-build" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website Source<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Amazon Web Services, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3ab9f855.js"></script>
<script src="/assets/js/main.a89a2cd9.js"></script>
</body>
</html>