"use strict";(self.webpackChunksimpleiot=self.webpackChunksimpleiot||[]).push([[1145],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>c});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),m=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=m(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=m(n),c=i,h=d["".concat(s,".").concat(c)]||d[c]||u[c]||o;return n?a.createElement(h,r(r({ref:t},p),{},{components:n})):a.createElement(h,r({ref:t},p))}));function c(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,r[1]=l;for(var m=2;m<o;m++)r[m]=n[m];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8653:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>m});var a=n(7462),i=(n(7294),n(3905));const o={id:"admin",title:"Administrator"},r="Administrator",l={unversionedId:"install/admin",id:"install/admin",title:"Administrator",description:"If you haven't already set up an AWS account, please do so now. To proceed, you should have an AWS Profile configured on your machine.",source:"@site/docs/install/admin.md",sourceDirName:"install",slug:"/install/admin",permalink:"/docs/install/admin",draft:!1,tags:[],version:"current",frontMatter:{id:"admin",title:"Administrator"},sidebar:"theSidebar",previous:{title:"Solo",permalink:"/docs/install/solo"},next:{title:"Team Member",permalink:"/docs/install/team-member"}},s={},m=[{value:"Installation pre-requisites",id:"installation-pre-requisites",level:2},{value:"Install SimpleIOT CLI",id:"install-simpleiot-cli",level:2},{value:"Install the Back-end",id:"install-the-back-end",level:2},{value:"Installer stages",id:"installer-stages",level:3},{value:"Logging in",id:"logging-in",level:2},{value:"Inviting Team Members",id:"inviting-team-members",level:2},{value:"Single-user Invitation",id:"single-user-invitation",level:2},{value:"Shared Environment",id:"shared-environment",level:2}],p={toc:m};function u(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"administrator"},"Administrator"),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"If you haven't already set up an AWS account, ",(0,i.kt)("a",{parentName:"p",href:"account"},(0,i.kt)("strong",{parentName:"a"},"please do so now")),". To proceed, you should have an ",(0,i.kt)("em",{parentName:"p"},"AWS Profile")," configured on your machine.")),(0,i.kt)("p",null,"We will be using the SimpleIOT Command-Line-Interface (CLI) to:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Set up the back-end"),(0,i.kt)("li",{parentName:"ul"},"Invite team members to join the ",(0,i.kt)("em",{parentName:"li"},"Team"))),(0,i.kt)("h2",{id:"installation-pre-requisites"},"Installation pre-requisites"),(0,i.kt)("p",null,"For all Users:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Latest version of Python from ",(0,i.kt)("a",{parentName:"li",href:"https://python.org"},"https://python.org")," (minimum 3.9+)"),(0,i.kt)("li",{parentName:"ul"},"Docker Desktop: ",(0,i.kt)("a",{parentName:"li",href:"https://docs.docker.com/desktop/"},"https://docs.docker.com/desktop/"))),(0,i.kt)("p",null,"Installing these may require other dependencies on Windows or Mac. Once installed, the system may need to be rebooted."),(0,i.kt)("h2",{id:"install-simpleiot-cli"},"Install SimpleIOT CLI"),(0,i.kt)("p",null,"Once you have the above set up, installing the CLI on your system is straightforward."),(0,i.kt)("p",null,"Open a powershell (Windows) or terminal (Mac) terminal window, then run:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"pip install simpleiot-cli\n")),(0,i.kt)("p",null,"Once installed, you can test the command-line interface:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"% iot help\nUsage: iot [OPTIONS] COMMAND [ARGS]...\n\nOptions:\n --help Show this message and exit.\n\nCommands:\n auth User Authentication\n cloud Cloud back-end provisioning\n data Data set and retrieve\n datatype Model DataType management\n device Device provisioning\n firmware Generate sample source\n location Location management\n model Manage Models\n project Project management\n team Team management (CLI only)\n template Project Template management\n toolchain Project Template management\n twin Manage Digital 3D Twin files\n update OTA Firmware Updates\n")),(0,i.kt)("h2",{id:"install-the-back-end"},"Install the Back-end"),(0,i.kt)("p",null,"You are ready to install the back-end if you have already set up your AWS Account (or added a profile to your ",(0,i.kt)("inlineCode",{parentName:"p"},"~/.aws")," directory)."),(0,i.kt)("p",null,"This step will download a pre-built Docker image to your system and invoke it. The image has all the pre-requisites needed to configure a SimpleIOT stack. It will ask you a few questions, then start the process."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"This step usually takes between 20-30 minutes. Please do not interrupt it, otherwise the system will be in a half-baked stage. "),(0,i.kt)("p",{parentName:"admonition"},"If you encounter any errors, make sure you run ",(0,i.kt)("inlineCode",{parentName:"p"},"iot cloud uninstall")," to clear out the debris before trying again.")),(0,i.kt)("admonition",{type:"danger"},(0,i.kt)("p",{parentName:"admonition"},"Do NOT run the installer while on a VPN!"),(0,i.kt)("p",{parentName:"admonition"},"If this happens, the final database setup stage may freeze when trying to securely connect to the database. If this happens, Ctrl-C out, uninstall (see above), and try installing again, this time without the VPN connection.")),(0,i.kt)("p",null,"To start, open a terminal window and run:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"iot cloud install\n")),(0,i.kt)("p",null,"A series of log messages from Docker will show that the container is getting downloaded. Once ready, you will be asked a few questions to bootstrap the process:"),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{src:"/img/install/bootstrap.png",width:"100%"})),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"None of the information you provide is sent anywhere outside your account or system. The questions are there only so you can distinguish one of your ",(0,i.kt)("em",{parentName:"p"},"Teams")," from another.")),(0,i.kt)("p",null,"The questions are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Choose AWS profile"),": ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"If you have more than one AWS profile on your machine, you will be shown a list of profiles. Select one using the arrow keys and press ENTER."),(0,i.kt)("li",{parentName:"ul"},"If you only have a single ",(0,i.kt)("em",{parentName:"li"},"default")," profile, that will be used, and you will not be prompted. "),(0,i.kt)("li",{parentName:"ul"},"If you do not have ANY accounts configured, the installer will ask you to enter your AWS Secret Key and ID (from your ",(0,i.kt)("a",{parentName:"li",href:"account"},"account setup"),")."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Organization Name"),": Choose a name that represents your organization. If you are a solo developer, enter your name. Or if you have grand ambitions: ",(0,i.kt)("em",{parentName:"li"},'"{enter name} Enterprises"'),' or _"Intergalactic {{enter name}}." ',(0,i.kt)("strong",{parentName:"li"},"Go ahead, Think Big!")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Administrator Email"),": This is your email. Make sure it's a valid one. You will be e-mailed an acknowledgment once the system is set up. The information is not transmitted anywhere outside your own account."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Dashboard Admin Password"),": The system generates a difficult-to-guess password. You can change it if you want, but it must comply with the ",(0,i.kt)("a",{parentName:"li",href:"https://aws.amazon.com/cognito/"},"Cognito")," minimum password requirements. You may also want to copy and save this password someplace safe. You will need this to log in with the CLI."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Short Team Name"),": This is the name you will use to refer to the ",(0,i.kt)("b",null,"Team")," when accessing the back-end. Even if you will only ever have a single Team, you still need to have a team name defined. The system will suggest a name based on your AWS profile (",(0,i.kt)("i",null,"default")," if you only have one AWS account configured). ")),(0,i.kt)("admonition",{type:"danger"},(0,i.kt)("p",{parentName:"admonition"},"The name of the team will be used to create a settings directory. The name should be short, without any spaces, and consist of characters allowed as directory names. i.e., characters, numbers, and a hyphen. "),(0,i.kt)("p",{parentName:"admonition"},"No punctuation or non-ASCII characters should be used. Seriously. Keep it boring.")),(0,i.kt)("p",null,"Once you have answered these questions, you will be asked to confirm and hit ENTER. Once the process starts, you can watch it go or take a 20-30m break. "),(0,i.kt)("p",null,"If the account has insufficient AIM privileges or something goes wrong, the system will try to rewind and delete what is created. However, you still have to run the following to clean out extra resources (like SSH keys, S3 buckets, etc.):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"iot cloud uninstall\n")),(0,i.kt)("h3",{id:"installer-stages"},"Installer stages"),(0,i.kt)("p",null,"The installer process has three stages:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Bootstrap"),(0,i.kt)("li",{parentName:"ul"},"Deploy"),(0,i.kt)("li",{parentName:"ul"},"Database setup")),(0,i.kt)("p",null,"When you run the ",(0,i.kt)("inlineCode",{parentName:"p"},"iot cloud install")," step, it runs all three back-to-back. Once done, you should see a message indicating success. If you see that, you can proceed to install the toolchain."),(0,i.kt)("p",null,"If you get any errors, check the ",(0,i.kt)("em",{parentName:"p"},"Troubleshooting")," section, uninstall, fix the problem, and start again. You can re-use the same answers as before, except when you run the installer, a new password is auto-generated."),(0,i.kt)("h2",{id:"logging-in"},"Logging in"),(0,i.kt)("p",null,"As an administrator, you can log into the system you just installed using the credentials:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"Username: admin\nPassword: {password generated during installation}\n")),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"If you forget or misplace the admin password, you can log into the AWS Console (make sure you set it to the same region as the AWS profile you configured). "),(0,i.kt)("p",{parentName:"admonition"},"Then visit the AWS Systems Manager (SSM) > Parameter Store, click on the ",(0,i.kt)("inlineCode",{parentName:"p"},"/simpleiot/{team-name}/admin_password")," key and click on the ",(0,i.kt)("inlineCode",{parentName:"p"},"Show")," link."),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{src:"/img/install/get-admin-password.png",width:"100%"}))),(0,i.kt)("h2",{id:"inviting-team-members"},"Inviting Team Members"),(0,i.kt)("p",null,"Once the back-end is installed, you can invite others to join your team. Only Administrators are allowed to invite others to join."),(0,i.kt)("p",null,"Inviting others is a ",(0,i.kt)("strong",{parentName:"p"},"three-step")," process:"),(0,i.kt)("br",null),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{src:"/img/install/team-invite-step.png",width:"70%"})),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Invoke the command to invite someone. This will require entering a valid username and email for the invitee. Next, a secure ",(0,i.kt)("em",{parentName:"p"},"invitation file")," and a ",(0,i.kt)("em",{parentName:"p"},"private key")," are generated. The administrator must get these to the recipient (via email, text, or any other messaging app)."),(0,i.kt)("br",null),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{src:"/img/install/team-join-step.png",width:"70%"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"The recipient will use the ",(0,i.kt)("em",{parentName:"p"},"invitation file")," and the ",(0,i.kt)("em",{parentName:"p"},"key")," to accept and join the team. They will be prompted to enter a password for that account."),(0,i.kt)("br",null),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{src:"/img/install/team-login-step.png",width:"50%"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Users can now log in with their username and password."))),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"The invitation system uses the ",(0,i.kt)("a",{parentName:"p",href:"https://aws.amazon.com/cognito/"},"Amazon Cognito")," user provisioning workflow. If there are any issues, you can delete the user via the SimpleIOT CLI or manually remove the account from the Amazon Cognito Console.")),(0,i.kt)("h2",{id:"single-user-invitation"},"Single-user Invitation"),(0,i.kt)("p",null,"To invite individual users, you can use:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'iot team invite --username={team-member username} --email="{recipient email}"\n')),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{src:"/img/install/team-invite-screenshot.png",width:"80%"})),(0,i.kt)("p",null,"This will show the name of an invitation file, ending with ",(0,i.kt)("em",{parentName:"p"},".simpleiot")," and saved in the current directory, as well as a unique ",(0,i.kt)("em",{parentName:"p"},"Invite Key")," value."),(0,i.kt)("p",null,"Both these items need to be securely sent to an invitee. The mode of transmission is up to you."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Suppose the recipient cannot finish the process and join using these credentials. In that case, you can use the following command to remove the user's account from Cognito:"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-python"},"iot team leave --username={team-member username}\n"))),(0,i.kt)("admonition",{type:"danger"},(0,i.kt)("p",{parentName:"admonition"},"Be careful when using this command on an active user. "),(0,i.kt)("p",{parentName:"admonition"},"Once removed, the user can no longer log into the SimpleIOT system. All the files stored on their own machine, as well as projects, models, and devices they have created, will remain untouched. But they will no longer be able to log in via the CLI to manage them."),(0,i.kt)("p",{parentName:"admonition"},"You will need to send them a new Team invitation to allow them to log in again.")),(0,i.kt)("h2",{id:"shared-environment"},"Shared Environment"),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"The SimpleIOT back-end is an open, shared environment designed for development and collaboration. This means all registered users can access all projects, models, and provisioned devices."),(0,i.kt)("p",{parentName:"admonition"},"It is recommended that each person create a project prefixed with a unique name or initials to prevent accidentally accessing someone else's work.")))}u.isMDXComponent=!0}}]);